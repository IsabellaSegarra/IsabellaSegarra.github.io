[
  {
    "objectID": "resources.html",
    "href": "resources.html",
    "title": "Resources",
    "section": "",
    "text": "this is an h1 element\n\n\nthis is an h1 element with the title class\n\n\nthis paragraph is orange\n\n\nthis text is centered\n\n&lt;p class = “center-text” light orange-text”\n\n\nHere’s where I am describing something fun that i enjoy doing.\nHere’s a full line\n\nOne line"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Talk about your journey to your professional career"
  },
  {
    "objectID": "about.html#my-journey",
    "href": "about.html#my-journey",
    "title": "About",
    "section": "",
    "text": "Talk about your journey to your professional career"
  },
  {
    "objectID": "about.html#what-i-do-for-fun",
    "href": "about.html#what-i-do-for-fun",
    "title": "About",
    "section": "What I do for fun",
    "text": "What I do for fun"
  },
  {
    "objectID": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html",
    "href": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html",
    "title": "Visualizing the Palisades and Eaton Fires: False Color, True Color, and Community Impacts",
    "section": "",
    "text": "Mapping fires with true color and false color imagery and visualizing its impacts socioeconomically.\n\n\nLink to Github repository\n\n\n\nIn January 2025, the Eaton and Palisades fires erupted in the foothills of Los Angeles county, devasting the region and displacing thousands. In this project, I integrated data from Landsat Collection 2 Level-2 atmospherically corrected surface reflactance data. This data has already been clipped to the area of the fire perimeters. This data is used to visualize the burn scars left from the Eaton and Palisades fire and is utilized with the fire perimeter data.\n\n\n\n\n\nFire permimeter data is from the county of Los Angeles via ArcGIS.\n\n\n\nLandsat data is an xarray.Dataset from Microsoft Planetary Computer.\n\n\n\nEnvironmental Justice Index data is a geodatabase from the CDC/ATSDR ranks U.S. census tracts.\n\n\n\n\nWhat you will learn in this analysis: 1. Wrangling netCdf4 datasets with rioxarray. 2. Mapping geospatial vector data with raster data. 3. Data visualization arguments within .imshow(). 4. Joining geospatial data. 5. Spatial joins and clipping.\n\n\n\nThe first step in processing data is to import the necesary libraries. At a minumum, you need to always import libraries for data importing, wrangling/cleaning, and visualizing.\n\n# Environment set-up \nimport pandas as pd # for data wrangling\nimport numpy as np  # for data wrangling \nimport geopandas as gpd # for geospatial data \nimport os # for data import\nimport matplotlib.pyplot as plt  # for visualizations \nimport xarray as xr # for Netcdf4 data \nimport rioxarray as rio # for xarray data \n\n\n\n\nIn this section, I will import the fire perimeter, landsat, and EJI data. These files are stored in the ‘data’ folder of this repository.\n\n# Import fire perimeter data\n# Eaton fire &gt;&gt;&gt;\nfp_eaton = os.path.join('data', 'Eaton_Perimeter_20250121') # use 'os' to specify file path \neaton_perim = gpd.read_file(fp_eaton) # use 'gpd' to read in geospatial data with geopandas \n# Palisades fire &gt;&gt;&gt;\nfp_palisades = os.path.join('data','Palisades_Perimeter_20250121') # use 'os' to specify file path \npalisades_perim = gpd.read_file(fp_palisades) # use 'gpd' to read in geospatial data with geopandas\n\nThe following data import is different than the data import for the fire perimeter data because the landsat data is a netCDf4.\n\n# Import Landsat data \nlandsat = xr.open_dataset('data/landsat8-2025-02-23-palisades-eaton.nc')\n\n\n# Import EJI data \n# Define file path\nfp_eji = os.path.join('data', 'EJI_2024_California', 'EJI_2024_California.gdb')\n# Open up file with gpd\neji_ca = gpd.read_file(fp_eji) \n\n\n\n\nIn this section I will do some preliminary exploration of the fire data. Since this is geospatial data, I will do the following: - check the CRS of each dataset - check if the data is projected - check if the data is multipolygon or polygon\n\n# Eaton fire perimeter\n\nprint('CRS:', eaton_perim.crs) \nprint('Is geographic?:', eaton_perim.crs.is_geographic)\nprint('Is projected?:', eaton_perim.crs.is_projected)\nprint('Is geometry polygon?:', eaton_perim.geom_type)\n\nCRS: EPSG:3857\nIs geographic?: False\nIs projected?: True\nIs geometry polygon?: 0     Polygon\n1     Polygon\n2     Polygon\n3     Polygon\n4     Polygon\n5     Polygon\n6     Polygon\n7     Polygon\n8     Polygon\n9     Polygon\n10    Polygon\n11    Polygon\n12    Polygon\n13    Polygon\n14    Polygon\n15    Polygon\n16    Polygon\n17    Polygon\n18    Polygon\n19    Polygon\ndtype: object\n\n\n\n# Palisades fire perimeter\nprint('CRS:', palisades_perim.crs)\nprint('Is geographic?:', palisades_perim.crs.is_geographic)\nprint('Is projected?:', palisades_perim.crs.is_projected)\nprint('Is geometry polygon?:', palisades_perim.geom_type)\n\nCRS: EPSG:3857\nIs geographic?: False\nIs projected?: True\nIs geometry polygon?: 0     Polygon\n1     Polygon\n2     Polygon\n3     Polygon\n4     Polygon\n5     Polygon\n6     Polygon\n7     Polygon\n8     Polygon\n9     Polygon\n10    Polygon\n11    Polygon\n12    Polygon\n13    Polygon\n14    Polygon\n15    Polygon\n16    Polygon\n17    Polygon\n18    Polygon\n19    Polygon\n20    Polygon\ndtype: object\n\n\nAlthough both datasets come from the same origin, it is best practice to check that their CRS’s match. This assert function will rase a warning if the CRS of Eaton and Palisades fire do not match.\n\n# Assert that the CRSs match \nassert eaton_perim.crs == palisades_perim.crs\n\nExploration Findings\nFrom my preliminary exploration, I see that both datasets have matching coordinate refrence systems, are both projected, and all have polygon geometries.\n\n\n\nIn this section I will do some preliminary exploration of the landsat data. I will do the following: - view the attributes, dimensions, and variables of the data - check the CRS of the data\n\n# View the variables, attributes, and dimensions of the data\nlandsat\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt; Size: 78MB\nDimensions:      (y: 1418, x: 2742)\nCoordinates:\n  * y            (y) float64 11kB 3.799e+06 3.799e+06 ... 3.757e+06 3.757e+06\n  * x            (x) float64 22kB 3.344e+05 3.344e+05 ... 4.166e+05 4.166e+05\n    time         datetime64[ns] 8B ...\nData variables:\n    red          (y, x) float32 16MB ...\n    green        (y, x) float32 16MB ...\n    blue         (y, x) float32 16MB ...\n    nir08        (y, x) float32 16MB ...\n    swir22       (y, x) float32 16MB ...\n    spatial_ref  int64 8B ...xarray.DatasetDimensions:y: 1418x: 2742Coordinates: (3)y(y)float643.799e+06 3.799e+06 ... 3.757e+06units :metreresolution :-30.0crs :EPSG:32611axis :Ylong_name :y coordinate of projectionstandard_name :projection_y_coordinatearray([3799050., 3799020., 3798990., ..., 3756600., 3756570., 3756540.])x(x)float643.344e+05 3.344e+05 ... 4.166e+05units :metreresolution :30.0crs :EPSG:32611axis :Xlong_name :x coordinate of projectionstandard_name :projection_x_coordinatearray([334410., 334440., 334470., ..., 416580., 416610., 416640.])time()datetime64[ns]...[1 values with dtype=datetime64[ns]]Data variables: (6)red(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]green(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]blue(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]nir08(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]swir22(y, x)float32...grid_mapping :spatial_ref[3888156 values with dtype=float32]spatial_ref()int64...crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]GeoTransform :334395.0 30.0 0.0 3799065.0 0.0 -30.0[1 values with dtype=int64]Indexes: (2)yPandasIndexPandasIndex(Index([3799050.0, 3799020.0, 3798990.0, 3798960.0, 3798930.0, 3798900.0,\n       3798870.0, 3798840.0, 3798810.0, 3798780.0,\n       ...\n       3756810.0, 3756780.0, 3756750.0, 3756720.0, 3756690.0, 3756660.0,\n       3756630.0, 3756600.0, 3756570.0, 3756540.0],\n      dtype='float64', name='y', length=1418))xPandasIndexPandasIndex(Index([334410.0, 334440.0, 334470.0, 334500.0, 334530.0, 334560.0, 334590.0,\n       334620.0, 334650.0, 334680.0,\n       ...\n       416370.0, 416400.0, 416430.0, 416460.0, 416490.0, 416520.0, 416550.0,\n       416580.0, 416610.0, 416640.0],\n      dtype='float64', name='x', length=2742))Attributes: (0)\n\n\n\n# Print the landsat CRS \nprint(landsat.rio.crs)\n\nNone\n\n\nExploration findings\nThe landsat data contains coordinates (x,y) with time (z). The variables correspond to wavelengths red, green, blue, near infared (nir), short wave infared(swir22), and a spatial refrence variable with information relating to the cooordinate refrence system and datum. The CRS of the dataset is not directly accessibly through rio.crs. Through accessing the ‘spatial_ref’ variable, I learned that the CRS for this dataset is 32611, which does not match the Eaton and Palisades fire perimeters’ CRS.\n\n\n\nSince the CRS of the landsat data is stored the ‘spatial_ref’ variable, in order to proceed with mapping the data, I need to restore the geospatial information. By storing the geospatial informaiton in a variable, this reduces the size and processing time of the landsat data.\n\n# View the landsat crs by accessing it through the spatial_ref attribute. Store this variable.\nlandsat_crs = landsat.spatial_ref.crs_wkt\nlandsat_crs\n\n'PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]'\n\n\nNow I will use rio.write_crs() to recover the geospatial information from the stored landsat_crs variable.\n\n# Recover geospatial information \nlandsat = landsat.rio.write_crs(landsat_crs, inplace=True) # recover the CRS from the spatial_ref  \n\n# Confirm CRS \nprint(landsat.rio.crs)\n\nEPSG:32611\n\n\n\n\n\nIn this section, I created two maps that display true color imagery, one with less specifications and one with the correct specifications. True color imagery displays colors within the light spectrum that humans can see (i.e., red, green, blue). When these three bands are used in combination, a full-color image emerges. In order to map the Landsat data with true colors, I need to access the red, green, and blue bands.\n\n# True Color Map 1\n# plot RGB as a numpy array\nlandsat[[\"red\", \"green\", \"blue\"]].to_array().plot.imshow()\n\nClipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).\n\n\n/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/matplotlib/cm.py:478: RuntimeWarning: invalid value encountered in cast\n  xx = (xx * 255).astype(np.uint8)\n\n\n\n\n\n\n\n\n\nThe map above displayed two warning messages. The first message pertained to how some RGB values are outside the allowed range to plot. The second message pertains to the NAN values within the landsat data. Python does not account for data that is outside the 0-255 byte range.\nHow to fix the warning messages:\nIn order to fix the NAN warning, we need to fill the nan values with .fillna(0).\nIn order to fix the map, we need to adjust some parameters in the .imshow() argument. These inlcude the following: - robust= TRUE: this ensures that the color limits are determined by the extreme values - vmin and vmax: this defines the data range that the map, they represent darkness and brightness\n\n# Check for NA values in bands\nrgb_na = landsat[['red', 'green', 'blue']].to_array().isnull().sum() # use .isnull() and count how many there are with .sum()\nrgb_na\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.DataArray ()&gt; Size: 8B\narray(110)\nCoordinates:\n    time         datetime64[ns] 8B ...\n    spatial_ref  int64 8B 0xarray.DataArray110array(110)Coordinates: (2)time()datetime64[ns]...[1 values with dtype=datetime64[ns]]spatial_ref()int640crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]array(0)Indexes: (0)Attributes: (0)\n\n\n\n# True color map 2\nfig, ax = plt.subplots(figsize=(8, 6)) # create figure plot \nax.axis('off') # remove axes \nlandsat[['red', 'green', 'blue']].to_array().fillna(0).plot.imshow( # add true colors data\n        vmin= 7000, vmax=15200,  # adjust the darkness (vmin) and brightness (vmax) levels\n        robust = True, # gets rid of outliers \n        ax=ax,\n    )\n\nax.set_title(\"Landsat 8 True Color RGB\", fontsize=14)\nplt.show()\n\nText(0.5, 1.0, 'Landsat 8 True Color RGB')\n\n\n\n\n\n\n\n\n\nMap 1 vs. Map 2\nAs you can see above, the first map failed to plot the landsat data. This was due to two main reasons: 1) outliers in the dataset and 2)NA values within the dataset. The second map was adjusted by filling in NA values with zero and adding adjusting for outliers with robust=true.\n\n\n\nIn this section, I created two false color imagery maps of the region where the Palisades and Eaton fires were. False color imagery is the process of one wavelengths not visible to the human eye with visible wavelengths to depict details on an image you normally do not see (Riebeek, 2014). This is useful method for visualizing the impacts of fire on the land. For this map, I used short-wave infared, near-infared, and red bands to depict vegetation and burn scars on a map.\n\n# Plot figure \nfig, ax = plt.subplots(figsize=(8, 6)) # create figure plot \nax.axis('off') # remove axes \n\nlandsat[['swir22', 'nir08', 'red']].to_array().plot.imshow( # add false colors\n    vmin= 6000, vmax=19000, # adjust the darkness (vmin) and brightness (vmax) levels\n    robust = True, # remove outliers\n    ax=ax,\n)\n\nfig.suptitle(\"Map of Palisades and Eaton Fires\", fontsize = 14)\nax.set_title(\"Landsat 8 False Color\", fontsize=10)\n\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\nIn this section I will produce a false color map with the Palisades and Eaton fire perimeters.\n\n\nBefore adding the Eaton and Palisades fire perimeters to do the map, I need to transform the CRS of Eaton and Palisades to match the landsat data. This ensures that the fire perimeters are correctly placed spatially on the landsat map.\n\n# Transform fire perimeters to match the CRS of landsat \neaton_perim = eaton_perim.to_crs(landsat.rio.crs)\npalisades_perim = palisades_perim.to_crs(landsat.rio.crs)\n\n\n# Assert that the CRS of Eaton matches the CRS of Palisades\nassert eaton_perim.crs == palisades_perim.crs \n\n\n# Assert that the CRS of Palisades matches the CRS of landsat \nassert landsat.rio.crs == palisades_perim.crs \n\n\nfig, ax = plt.subplots(figsize=(8, 6)) # create figure plot \nax.axis('off') # remove axes \n\nlandsat[['swir22', 'nir08', 'red']].to_array().fillna(0).plot.imshow( # add landsat data\n    vmin= 6000, vmax=19000, # adjust the darkness (vmin) and brightness (vmax) levels\n    robust = True,\n    ax=ax,\n)\neaton_perim.plot(ax=ax, color = 'none', edgecolor = 'black', label = 'Eaton fire perimeter')\npalisades_perim.plot(ax=ax, color = 'none', edgecolor = 'black', label = 'Palisades fire perimeter')\n\nplt.figtext(x = .65,\n            y = .65,\n            s =\"Eaton Fire Boundary\",\n            weight = 'bold')\nplt.figtext(x = .2,\n            y = .51,\n            s =\"Palisades Fire Boundary\",\n            weight = 'bold')\nax.set_title(\"Map of Palisades and Eaton Fire Perimeters: \\n  Landsat 8 SWIR/NIR/Red False Color\", fontsize=12)\nplt.savefig('fire_map.png', dpi=300, transparent=True)\n\n\n\n\n\n\n\n\nThe map above is a false color map depicting the Palisades and Eaton fire boundaries. The map utilizes false color imagery, or a method for displaying wavelengths beyond the human eye’s ability to see. Near infared (NIR) shows healhty vegetation and short-wave infared (SWIR) show recently burned regions. Through this process of utilizing the near infared, short-wave infared, and red bands, we are able to see the lack of vegetation present within the Palisades and Eaton fire boundaries.\n\n\n\n\nIn this section I will perform a social dimensions analysis with the EJI data to view the impact of the Palisades and Eaton fires on\nIn this section, I will perform the following: 1. Spatial join of EJI data to fire perimeters. 2. Clip EJI data to match fire perimeters. 3. Map EJI data to fire perimeters.\nVariables of interest: - E_RENTER: Percentage of housing units that are renter occupied - E_UNINSUR: Percentage of persons who are uninsured (i.e., have no health insurance) - E_AGE65: Persons aged 65 and older - E_PARK: proportion of green space\n\n\nIn order to view the socieconomic effects of the Palisades and Eaton fires, we need to join the fire perimeters with the EJI data. This is achieved through the process of spatial joining.\nSpatial join combines attributes from two dfs based on a spatial relationship (intersects).\nIn order to join spatially join the EJI data with the fire perimeters, the CRS of both need to match. I can specify this within the gpd.sjoin() argument.\n\n# Spatially join EJI with Palisades fire perimeters\npali_eji = gpd.sjoin(eji_ca.to_crs(palisades_perim.crs),palisades_perim) \n\nNow I will view the spatial join.\n\n# Exploratory graph: Palisades EJI spatial join\nfig, ax = plt.subplots(figsize = (11,5)) # initialize figure\nax.axis('off') # remove axes \n\npali_eji.plot('TRACTCE', # plot census tract from spatial join\n              ax = ax)\n# Add palisades perimeter \npalisades_perim.plot(ax = ax, \n                     color = 'none', \n                     edgecolor = 'red', \n                     linewidth= 1.5)\n\nax.set_title('')\nplt.show() \n\n\n\n\n\n\n\n\n\n# Spatially join EJI with Eaton fire perimeters\neaton_eji = gpd.sjoin(eji_ca.to_crs(eaton_perim.crs),eaton_perim) \n\n\n# Exploratory graph: Eaton EJI spatial join\nfig, ax = plt.subplots(figsize = (11,5)) # initialize figure\nax.axis('off') # remove axes \n\neaton_eji.plot('TRACTCE', # plot census tract from spatial join\n              ax = ax)\n# Add eaton perimeter \neaton_perim.plot(ax = ax, \n                     color = 'none', \n                     edgecolor = 'red', \n                     linewidth= 1.5)\n\nax.set_title('')\nplt.show() \n\n\n\n\n\n\n\n\nYou may notice that the spatial join product includes the full expanse census tracts (from EJI data) beyond the fire perimeters. This is because spatial joins will combines attributes from one layer to another.\n\n\n\n\nIn order to fit the census tracts within the fire perimeters, I will perform polygon clipping with gpd.clip(). Clipping removes all features that fall outside a specified boundary, effectively trimming one dataset with another.\n\n# Change the CRS EJI to match palisades \neji_ca = eji_ca.to_crs(palisades_perim.crs)\n\n\n# Clip eji to palisades\npalisades_clip = gpd.clip(eji_ca, palisades_perim)\n\n\n# Clip eji to eaton\neaton_clip = gpd.clip(eji_ca, eaton_perim)\n\nNow I will view the clipping result.\n\nfig, ax = plt.subplots(figsize = (11,5)) # initialize figure\nax.axis('off') # remove axes \npalisades_clip.plot('TRACTCE', \n                    ax = ax )\nplt.show()\n\n\n\n\n\n\n\n\n\nfig, ax = plt.subplots(figsize = (11,5)) # initialize figure\nax.axis('off') # remove axes \neaton_clip.plot('TRACTCE', \n                    ax = ax )\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\nIn this section I will map the EJI variable E_AGE65 (Persons aged 65 and older) to the fire perimeters.\n\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 10))\n\n# UPDATE WITH YOU EJI VARIABLE FROM STEP 1\neji_variable = 'E_AGE65'\n\n# Find common min/max for legend range\nvmin = min(palisades_clip[eji_variable].min(), palisades_clip[eji_variable].min())\nvmax = max(eaton_clip[eji_variable].max(), eaton_clip[eji_variable].max())\n\n# Plot census tracts within Palisades perimeter\npalisades_clip.plot(\n    column= eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax1,\n)\nax1.set_title('Palisades Fire')\nax1.axis('off')\n\n# Plot census tracts within Eaton perimeter\neaton_clip.plot(\n    column=eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax2,\n)\nax2.set_title('Eaton Fire')\nax2.axis('off')\n\n# Add overall title\nfig.suptitle('Individuals Age 65 Or Older in Palisades and Eaton Fires')\n\n# Add shared colorbar at the bottom\nsm = plt.cm.ScalarMappable( norm=plt.Normalize(vmin=vmin, vmax=vmax))\ncbar_ax = fig.add_axes([0.25, 0.08, 0.5, 0.02])  # [left, bottom, width, height]\ncbar = fig.colorbar(sm, cax=cbar_ax, orientation='horizontal')\ncbar.set_label('Individuals 65+')\n\nplt.show()\n\n\n\n\n\n\n\n\nThe map above shows the concentration of individuals aged 65 and older affected by the Palisades and Eaton fires. Certain areas within the fire perimeters have noticeably higher proportions of older adults. According to CBS News, approximately 21% of residents in the Eaton Fire zone and 26% of residents in the Palisades Fire zone were over the age of 65. This analysis resonates with me after watching numerous videos shared by local residents during the fires—stories of older adults losing homes filled with decades of memories were especially heartbreaking.\n\n\n\nLos Angeles County/ NIFC FIRIS. (2025). Palisades_and_Eaton_Dissolved_Fire_Perimeters [data file] Available: https://hub.arcgis.com/maps/ad51845ea5fb4eb483bc2a7c38b2370c/about [Date of Access: November 17 2025]\nU.S. Geological Survey. Landsat Collection 2 Level-2 Surface Reflectance (Microsoft Planetary Computer version)_[data file] Available: https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2#overview [Date of Access: November 17 2025]\nCenters for Disease Control and Prevention and Agency for Toxic Substances Disease Registry. [Year] Environmental Justice Index. [Date of Access: November 21 2025]. https://atsdr.cdc.gov/place-health/php/eji/eji-data-download.html\nRiebeek, H. (2014, March 4). Why is that forest red and that cloud blue? NASA Earth Observatory. https://earthobservatory.nasa.gov/features/FalseColor\nCBS News. (2025, March 18). Older L.A. wildfire victims struggle to pick up the pieces. CBS News. https://www.cbsnews.com/news/elderly-los-angeles-wildfire-victims/"
  },
  {
    "objectID": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html#false-color-map",
    "href": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html#false-color-map",
    "title": "Visualizing the Palisades and Eaton Fires: False Color, True Color, and Community Impacts",
    "section": "",
    "text": "In this section I will produce a false color map with the Palisades and Eaton fire perimeters.\n\n\nBefore adding the Eaton and Palisades fire perimeters to do the map, I need to transform the CRS of Eaton and Palisades to match the landsat data. This ensures that the fire perimeters are correctly placed spatially on the landsat map.\n\n# Transform fire perimeters to match the CRS of landsat \neaton_perim = eaton_perim.to_crs(landsat.rio.crs)\npalisades_perim = palisades_perim.to_crs(landsat.rio.crs)\n\n\n# Assert that the CRS of Eaton matches the CRS of Palisades\nassert eaton_perim.crs == palisades_perim.crs \n\n\n# Assert that the CRS of Palisades matches the CRS of landsat \nassert landsat.rio.crs == palisades_perim.crs \n\n\nfig, ax = plt.subplots(figsize=(8, 6)) # create figure plot \nax.axis('off') # remove axes \n\nlandsat[['swir22', 'nir08', 'red']].to_array().fillna(0).plot.imshow( # add landsat data\n    vmin= 6000, vmax=19000, # adjust the darkness (vmin) and brightness (vmax) levels\n    robust = True,\n    ax=ax,\n)\neaton_perim.plot(ax=ax, color = 'none', edgecolor = 'black', label = 'Eaton fire perimeter')\npalisades_perim.plot(ax=ax, color = 'none', edgecolor = 'black', label = 'Palisades fire perimeter')\n\nplt.figtext(x = .65,\n            y = .65,\n            s =\"Eaton Fire Boundary\",\n            weight = 'bold')\nplt.figtext(x = .2,\n            y = .51,\n            s =\"Palisades Fire Boundary\",\n            weight = 'bold')\nax.set_title(\"Map of Palisades and Eaton Fire Perimeters: \\n  Landsat 8 SWIR/NIR/Red False Color\", fontsize=12)\nplt.savefig('fire_map.png', dpi=300, transparent=True)\n\n\n\n\n\n\n\n\nThe map above is a false color map depicting the Palisades and Eaton fire boundaries. The map utilizes false color imagery, or a method for displaying wavelengths beyond the human eye’s ability to see. Near infared (NIR) shows healhty vegetation and short-wave infared (SWIR) show recently burned regions. Through this process of utilizing the near infared, short-wave infared, and red bands, we are able to see the lack of vegetation present within the Palisades and Eaton fire boundaries."
  },
  {
    "objectID": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html#visualizing-fires-with-socieconomic-data",
    "href": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html#visualizing-fires-with-socieconomic-data",
    "title": "Visualizing the Palisades and Eaton Fires: False Color, True Color, and Community Impacts",
    "section": "",
    "text": "In this section I will perform a social dimensions analysis with the EJI data to view the impact of the Palisades and Eaton fires on\nIn this section, I will perform the following: 1. Spatial join of EJI data to fire perimeters. 2. Clip EJI data to match fire perimeters. 3. Map EJI data to fire perimeters.\nVariables of interest: - E_RENTER: Percentage of housing units that are renter occupied - E_UNINSUR: Percentage of persons who are uninsured (i.e., have no health insurance) - E_AGE65: Persons aged 65 and older - E_PARK: proportion of green space\n\n\nIn order to view the socieconomic effects of the Palisades and Eaton fires, we need to join the fire perimeters with the EJI data. This is achieved through the process of spatial joining.\nSpatial join combines attributes from two dfs based on a spatial relationship (intersects).\nIn order to join spatially join the EJI data with the fire perimeters, the CRS of both need to match. I can specify this within the gpd.sjoin() argument.\n\n# Spatially join EJI with Palisades fire perimeters\npali_eji = gpd.sjoin(eji_ca.to_crs(palisades_perim.crs),palisades_perim) \n\nNow I will view the spatial join.\n\n# Exploratory graph: Palisades EJI spatial join\nfig, ax = plt.subplots(figsize = (11,5)) # initialize figure\nax.axis('off') # remove axes \n\npali_eji.plot('TRACTCE', # plot census tract from spatial join\n              ax = ax)\n# Add palisades perimeter \npalisades_perim.plot(ax = ax, \n                     color = 'none', \n                     edgecolor = 'red', \n                     linewidth= 1.5)\n\nax.set_title('')\nplt.show() \n\n\n\n\n\n\n\n\n\n# Spatially join EJI with Eaton fire perimeters\neaton_eji = gpd.sjoin(eji_ca.to_crs(eaton_perim.crs),eaton_perim) \n\n\n# Exploratory graph: Eaton EJI spatial join\nfig, ax = plt.subplots(figsize = (11,5)) # initialize figure\nax.axis('off') # remove axes \n\neaton_eji.plot('TRACTCE', # plot census tract from spatial join\n              ax = ax)\n# Add eaton perimeter \neaton_perim.plot(ax = ax, \n                     color = 'none', \n                     edgecolor = 'red', \n                     linewidth= 1.5)\n\nax.set_title('')\nplt.show() \n\n\n\n\n\n\n\n\nYou may notice that the spatial join product includes the full expanse census tracts (from EJI data) beyond the fire perimeters. This is because spatial joins will combines attributes from one layer to another."
  },
  {
    "objectID": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html#polygon-clipping",
    "href": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html#polygon-clipping",
    "title": "Visualizing the Palisades and Eaton Fires: False Color, True Color, and Community Impacts",
    "section": "",
    "text": "In order to fit the census tracts within the fire perimeters, I will perform polygon clipping with gpd.clip(). Clipping removes all features that fall outside a specified boundary, effectively trimming one dataset with another.\n\n# Change the CRS EJI to match palisades \neji_ca = eji_ca.to_crs(palisades_perim.crs)\n\n\n# Clip eji to palisades\npalisades_clip = gpd.clip(eji_ca, palisades_perim)\n\n\n# Clip eji to eaton\neaton_clip = gpd.clip(eji_ca, eaton_perim)\n\nNow I will view the clipping result.\n\nfig, ax = plt.subplots(figsize = (11,5)) # initialize figure\nax.axis('off') # remove axes \npalisades_clip.plot('TRACTCE', \n                    ax = ax )\nplt.show()\n\n\n\n\n\n\n\n\n\nfig, ax = plt.subplots(figsize = (11,5)) # initialize figure\nax.axis('off') # remove axes \neaton_clip.plot('TRACTCE', \n                    ax = ax )\nplt.show()"
  },
  {
    "objectID": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html#map-eji-data-to-fire-perimeters",
    "href": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html#map-eji-data-to-fire-perimeters",
    "title": "Visualizing the Palisades and Eaton Fires: False Color, True Color, and Community Impacts",
    "section": "",
    "text": "In this section I will map the EJI variable E_AGE65 (Persons aged 65 and older) to the fire perimeters.\n\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 10))\n\n# UPDATE WITH YOU EJI VARIABLE FROM STEP 1\neji_variable = 'E_AGE65'\n\n# Find common min/max for legend range\nvmin = min(palisades_clip[eji_variable].min(), palisades_clip[eji_variable].min())\nvmax = max(eaton_clip[eji_variable].max(), eaton_clip[eji_variable].max())\n\n# Plot census tracts within Palisades perimeter\npalisades_clip.plot(\n    column= eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax1,\n)\nax1.set_title('Palisades Fire')\nax1.axis('off')\n\n# Plot census tracts within Eaton perimeter\neaton_clip.plot(\n    column=eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax2,\n)\nax2.set_title('Eaton Fire')\nax2.axis('off')\n\n# Add overall title\nfig.suptitle('Individuals Age 65 Or Older in Palisades and Eaton Fires')\n\n# Add shared colorbar at the bottom\nsm = plt.cm.ScalarMappable( norm=plt.Normalize(vmin=vmin, vmax=vmax))\ncbar_ax = fig.add_axes([0.25, 0.08, 0.5, 0.02])  # [left, bottom, width, height]\ncbar = fig.colorbar(sm, cax=cbar_ax, orientation='horizontal')\ncbar.set_label('Individuals 65+')\n\nplt.show()\n\n\n\n\n\n\n\n\nThe map above shows the concentration of individuals aged 65 and older affected by the Palisades and Eaton fires. Certain areas within the fire perimeters have noticeably higher proportions of older adults. According to CBS News, approximately 21% of residents in the Eaton Fire zone and 26% of residents in the Palisades Fire zone were over the age of 65. This analysis resonates with me after watching numerous videos shared by local residents during the fires—stories of older adults losing homes filled with decades of memories were especially heartbreaking."
  },
  {
    "objectID": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html#refrences",
    "href": "posts/2025-12-03-eds220-blog/eaton-palisades-blog.html#refrences",
    "title": "Visualizing the Palisades and Eaton Fires: False Color, True Color, and Community Impacts",
    "section": "",
    "text": "Los Angeles County/ NIFC FIRIS. (2025). Palisades_and_Eaton_Dissolved_Fire_Perimeters [data file] Available: https://hub.arcgis.com/maps/ad51845ea5fb4eb483bc2a7c38b2370c/about [Date of Access: November 17 2025]\nU.S. Geological Survey. Landsat Collection 2 Level-2 Surface Reflectance (Microsoft Planetary Computer version)_[data file] Available: https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2#overview [Date of Access: November 17 2025]\nCenters for Disease Control and Prevention and Agency for Toxic Substances Disease Registry. [Year] Environmental Justice Index. [Date of Access: November 21 2025]. https://atsdr.cdc.gov/place-health/php/eji/eji-data-download.html\nRiebeek, H. (2014, March 4). Why is that forest red and that cloud blue? NASA Earth Observatory. https://earthobservatory.nasa.gov/features/FalseColor\nCBS News. (2025, March 18). Older L.A. wildfire victims struggle to pick up the pieces. CBS News. https://www.cbsnews.com/news/elderly-los-angeles-wildfire-victims/"
  },
  {
    "objectID": "posts/marine-aquaculture-blog/marine-aquaculture.html",
    "href": "posts/marine-aquaculture-blog/marine-aquaculture.html",
    "title": "Assessing Potential Species for Marine Aquaculture in West Coast EEZs",
    "section": "",
    "text": "Have you ever thought about the environmental impact of the food you eat? If you’re anything like me, you may have tried going vegan or vegetarian at some point, hoping to reduce your carbon footprint by cutting out beef and other protein sources often linked to greenhouse gas emissions. While individual choices are important, solutions that are practical and scalable—like marine aquaculture—can have a far more direct and meaningful impact on mitigating climate change.\nWhat is marine aquaculture?\n“Marine aquaculture refers to the breeding, rearing, and harvesting of aquatic plants and animals. It can take place in the ocean, or on land in tanks and ponds.” (NOAA Fisheries (2025)).\nTo many, farming in the ocean might sound novel—but it’s actually been a part of life in some regions for thousands of years. The Kwakwaka’wakw, the Indigenous people of the Pacific Northwest Coast, living in northern Vancouver Island and mainland British Columbia, were known for harvesting clams in clam gardens, sustaining their populations for thousands of years (Groesbeck et al. (2014)).\nAs the demand for seafood increases, reliance soley on wild-caught populations, which has been ins teady decline since the 1980s (Aquarium of the Pacific (n.d.)) is not sustainable. Marine aquaculture has become popular for its use as a more suitable protein option than land-based meat production and wild-caught sources, with some studies showing that marine aquaculture greenhouse gas emissions could be 40% lower than emissions from land-based aquaculture (Arévalo-Martínez (2024)). It complements current wild fisheries, produces jobs, and can meet the demand for seafood as human populations continue to grow.\nAs mentioned by Gentry et.al, limitations to marine aquaculture include ocean depth, marine protected areas, global fishing and shipping lanes, and environmental factors (Gentry et al. (2017)). The article mentioned that proper planning is key to successful marine aquaculture. That includes choosing the correct species based on environmental factors and the species’ suitability."
  },
  {
    "objectID": "posts/marine-aquaculture-blog/marine-aquaculture.html#overview-of-study",
    "href": "posts/marine-aquaculture-blog/marine-aquaculture.html#overview-of-study",
    "title": "Assessing Potential Species for Marine Aquaculture in West Coast EEZs",
    "section": "Overview of study",
    "text": "Overview of study\nIn this study, I investigated where to prioritize marine aquaculture in the West Coast of the United States within Exclusive Economic Zones (EEZ) for two focal species: oysters and blue mussels. Exclusive Economic Zones are regions of the ocean that are open for a country to explore. The U.S. West coast has five regions. (NOAA Ocean Service (2024))."
  },
  {
    "objectID": "posts/marine-aquaculture-blog/marine-aquaculture.html#the-data-i-used",
    "href": "posts/marine-aquaculture-blog/marine-aquaculture.html#the-data-i-used",
    "title": "Assessing Potential Species for Marine Aquaculture in West Coast EEZs",
    "section": "The Data I Used",
    "text": "The Data I Used\nThe data for this study includes a shapefile for the West Coast EEZ, bathymetry (depth) raster, and sea surface temperature raster.\n\nSpecies data\nThe two focal species for this study are oysters and blue mussels (Mytilus edulis). Both of these bivalve species are found in the Pacific ocean and have the ability to serve as a great protein source for marine aquaculture. I found their depth and temperature requirements from SeaLifeBase (n.d.) and Zagata et al. (2008).\n\n\n\nPacific Oyster\n\n\n\n\n\nBlue Mussel\n\n\n\n\n\nTable 1. Species information\n\n\nSpecies\nTemperature Range\nDepth Range\n\n\n\n\nOysters\n11-30°C\n0-70 m\n\n\nBlue Mussel\n5-20°C\n0-60 m\n\n\n\n\n\n\n\nSea Surface Temperature Data\nIn this study, I will use average annual sea surface temperature (SST) from 2008 to 2012. The data is from NOAA’s Daily Global Satellite Sea Surface Temperature anomaly NOAA Coral Reef Watch (n.d.).\n\n#......Import Sea Surface Temperature Data......\n\n# Read in SST rasters in a raster stack \nsst_fp &lt;- list.files(here(\"posts\", \"marine-aquaculture-blog\", \"data\"), pattern = \"average_annual_sst_\", full.names = TRUE)\n# Stack \nsst &lt;- rast(sst_fp) %&gt;% \n  project(\"EPSG:4326\") # project CRS \n\n# Clear working environment \nrm(list = 'sst_fp')\n\nIn this section, I will process the sea surface temperature (SST) data in order to combine it with the depth data. The SST data needs to be averaged and converted into Celsius.\n\n#......Data Wrangling......\n\n# Find the average sea surface temperature from 2008-2012\navg_sst &lt;- mean(sst)\n\n# Convert average SST from Kelvin to Celsius\navg_sst_c &lt;- avg_sst - 273.15\n\n# Clear working environment\nrm(avg_sst)\n\n\n\nDepth Data\nIn this study, I will use bathymetry data from the General Bathymetric Chart of the Oceans GEBCO Compilation Group (2022).\n\n#......Import Depth Data......\ndepth &lt;- rast(here(\"posts\", \"marine-aquaculture-blog\", \"data\", \"depth.tif\")) %&gt;% \n  project(\"EPSG:4326\") # project CRS\n\nIn this section, I matched the resolution (number and size of pixels) of depth to match avg_sst_c.\n\n#......Crop depth raster......\n\n# Create extent of 'avg_sst_c'\next_sst &lt;- ext(avg_sst_c)\n\n# Crop depth raster to match the extent of the SST raster\ndepth_cropped &lt;- crop(depth, ext_sst)\n\n# Ensure data was cropped \nif(ncell(depth) == ncell(depth_cropped)) {\n  warning(\"data did not crop!\")\n} else {\n  message(\"data cropped!\")\n}\n\ndata cropped!\n\n\n\n#......Resample......\n\n# Resample to match resolutions \ndepth &lt;- resample(depth_cropped, avg_sst_c, method = \"bilinear\") # method bilinear \n\n# Check that the resolutions match\nif (all(res(depth) == res(avg_sst_c))) {\n  message(\"Resolutions match!\")\n} else {\n  warning(\"Resolutions do not match\")\n}\n\nResolutions match!\n\n# Remove 'depth_cropped' from environment\nrm(list = 'depth_cropped')\n\n\n#......CRS check......\n\n# Check that CRSs match \nif (crs(depth) != crs(avg_sst_c)) {\n  warning(\"Coordinate refrence systems DO NOT match!\")\n} else {\n  message(\"Coordinate refrence systems match!\")\n} \n\nCoordinate refrence systems match!"
  },
  {
    "objectID": "posts/marine-aquaculture-blog/marine-aquaculture.html#find-suitable-locations-for-species",
    "href": "posts/marine-aquaculture-blog/marine-aquaculture.html#find-suitable-locations-for-species",
    "title": "Assessing Potential Species for Marine Aquaculture in West Coast EEZs",
    "section": "Find suitable locations for species",
    "text": "Find suitable locations for species\nIn this section I will find suitable locations (area in km) that satisfy the specific sea surface temperature and depth range for oysters.\n\nReclassificaiton Matrix\nIn order to find suitable locations for the oyster, I need to reclassify avvg_sst_c and depth data into locations that are suitable for oysters. This process returns the cells in the raster that satisfy the criteria.\n\n1: suitable locations\n0: unsuitable locations\n\n\n#......Reclassification matrix: sea surface temperature......\n\nsst_matrix &lt;- matrix(c(-Inf, 11, 0, # values -Inf to 11 = 0\n                11, 30, 1,  # values 11 to 30 = 1\n                30, Inf, 0), # values 30 to Inf = 0\n              ncol = 3, byrow = TRUE)\n\n# Apply the matrix to reclassify the raster, making all cells 0 or 1\nsst_rcl &lt;- terra::classify(avg_sst_c, rcl = sst_matrix)\n\n\n# Assign Nan values as NA\nvalues(sst_rcl)[is.nan(values(sst_rcl))] &lt;- NA\n\n\n# Ensure SST was reclassified\nif (identical(values(avg_sst_c), values(sst_rcl))) {\n  warning(\"SST not reclassified!\")\n} else {\n  message(\"SST reclassified!\")\n}\n\nSST reclassified!\n\n\n\n#......Reclassification matrix: Depth......\n\ndepth_matrix &lt;- matrix(c(-Inf, -70, 0, # values -Inf to 70 = 0\n                -70, 0, 1,  # values 70 to 0 = 1\n                0, Inf, 0), # values \n              ncol = 3, byrow = TRUE)\n\n\n# Apply the matrix to reclassify the raster, making all cells 0 or 1\ndepth_rcl &lt;- terra::classify(depth, rcl = depth_matrix)\n\n# Ensure depth was reclassified\nif (identical(values(depth), values(depth_rcl))) {\n  warning(\"Depth not reclassified!\")\n} else {\n  message(\"Depth reclassified!\")\n}\n\nDepth reclassified!\n\n\nI now have suitable locations for the specific sea surface temperature and depth specifications for oysters.\n\n#......Find suitable locations......\n\n# Multiply reclassification matrices to find suitable locations\n# creates matrix of 0/1 where 0 = not suitable and 1 = suitable \nsuitable_locations &lt;- sst_rcl * depth_rcl \n\n\n# Convert all zeros to NA values\nsuitable_locations[suitable_locations == 0] &lt;- NA\n\n\n# Find the area of suitable locations for oysters \nsuitable_area &lt;- expanse(suitable_locations, unit = \"km\")"
  },
  {
    "objectID": "posts/marine-aquaculture-blog/marine-aquaculture.html#determine-the-most-suitable-eez",
    "href": "posts/marine-aquaculture-blog/marine-aquaculture.html#determine-the-most-suitable-eez",
    "title": "Assessing Potential Species for Marine Aquaculture in West Coast EEZs",
    "section": "Determine the most suitable EEZ",
    "text": "Determine the most suitable EEZ\nIn this section, I will determine the total suitable area within each EEZ for oysters. This data is from Marineregions.org Flanders Marine Institute (2025).\n\n#......Import Data and Check CRS......\n\n# Import data\neez &lt;- st_read(here(\"posts\", \"marine-aquaculture-blog\", \"data\", \"wc_regions_clean.shp\")) \n\n# Check if CRS match \nif (st_crs(eez) == st_crs(4326)) {\n  message(\"CRS match with depth and average sea surface temperature\")\n} else {\n  warning(\"CRS does not match! Transforming required.\")\n}\n\n\nFind suitable areas within West Coast EEZs\nIn this section I will find the suitable areas within West Coast EEZs.\n\n#......Apply mask ......\n\n# Mask suitable locations to eez habitat  \neez_cells &lt;- mask(suitable_locations, eez) \n\nif (ncell(suitable_locations) == ncell(eez_cells)) {\n  message(\"Mask worked!\") \n}else {\n  warning(\"Mask did not work\")\n}\n\nMask worked!\n\n\n\n#......Calculate total area ......\n\n# make sure eez and eez cells extent match\nif (ext(eez) == ext(eez_cells)) {\n  message(\"Extents match!\")\n} else {\n  warning(\"Extents don't match! Cropping eez_cells to match eez extent...\")\n  eez_cells &lt;- crop(eez_cells, ext(eez))\n}\n\nWarning: Extents don't match! Cropping eez_cells to match eez extent...\n\n# Calculate cell size area of each raster cell\neez_cells_area &lt;- cellSize(eez_cells, unit = \"km\")\n\n#......Find total area......\n\n# Rasterize eez\nrast_eez &lt;- rasterize(eez, eez_cells, field = \"rgn_id\")\n\n# perform zonal operation \narea_by_eez&lt;- zonal(x = eez_cells_area * eez_cells, z = rast_eez, fun = \"sum\", na.rm = TRUE)\n\n\n#......Join data......\n\neez_suitable_locations &lt;- area_by_eez %&gt;%\n  left_join(eez, by = \"rgn_id\")\n\n# clean up data frame\n\neez_suitable_locations &lt;- eez_suitable_locations %&gt;% \n  rename(area_suitable_km = area) %&gt;% # rename area\n  select(rgn, area_suitable_km, geometry) # select for region, area, and geometry to plot \n\n#.....Convert to sf object....\neez_suitable_locations &lt;- st_as_sf(eez_suitable_locations)\n\n\n\n\nTable 2. Suitable Area for Oysters\n\n\nRegions\nSuitable Habitat (km)\n\n\n\n\nOregon\n1028.886\n\n\nNorthern California\n194.126\n\n\nCentral California\n3655.923\n\n\nSouthern California\n3098.006\n\n\nWashington\n2421.627"
  },
  {
    "objectID": "posts/marine-aquaculture-blog/marine-aquaculture.html#map-oyster-suitable-area",
    "href": "posts/marine-aquaculture-blog/marine-aquaculture.html#map-oyster-suitable-area",
    "title": "Assessing Potential Species for Marine Aquaculture in West Coast EEZs",
    "section": "Map: Oyster Suitable Area",
    "text": "Map: Oyster Suitable Area\nNow I will map the suitable locations for oyster marien aquaculture.\n\n#| label: oyster map\noyster_map &lt;-\n  tm_basemap(\"Esri.WorldImagery\") +\ntm_shape(eez_suitable_locations) +\n  tm_polygons(fill = \"area_suitable_km\" , # fill polygons based on suitable area \n              style = \"cont\", # continuous value scale \n    palette = c(\"#9ef7f0\", \"#1d524d\"), # palette of colors \n    title = \"Suitable habitat (km²)\", size = 0.8) + # legend title \n  tm_layout(legend.outside = TRUE, \n            legend.text.size = 0.5) +\n  tm_title(paste(\"Suitable Habitat Range For\", \"Oyster Aquaculture\", sep = \"\\n\"), size = 1)  +\n  tm_graticules(lwd = 0.2) + # gridlines \n  tm_scalebar(position = c(\"left\", \"bottom\"), text.size = 0.3)+ #scalebar \n  tm_text(\"rgn\", # overlay text for region\n          size = 0.4,  \n          xmod = -0.2,\n  ymod = 0.3)\n\n\n\n\n── tmap v3 code detected ───────────────────────────────────────────────────────\n\n\n[v3-&gt;v4] `tm_polygons()`: instead of `style = \"cont\"`, use fill.scale =\n`tm_scale_continuous()`.\nℹ Migrate the argument(s) 'palette' (rename to 'values') to\n  'tm_scale_continuous(&lt;HERE&gt;)'\n[v3-&gt;v4] `tm_polygons()`: migrate the argument(s) related to the legend of the\nvisual variable `fill` namely 'title' to 'fill.legend = tm_legend(&lt;HERE&gt;)'\n[tm_polygons()] Argument `size` unknown.\n\n# View map\noyster_map \n\n\n\n\n\n\n\n\nThe map above depicts the suitable locations for oyster aquaculture within West Coast EEZs. As you can see, the regions with the most suitable habitat are Central and Southern California."
  },
  {
    "objectID": "posts/marine-aquaculture-blog/marine-aquaculture.html#generalizable-function",
    "href": "posts/marine-aquaculture-blog/marine-aquaculture.html#generalizable-function",
    "title": "Assessing Potential Species for Marine Aquaculture in West Coast EEZs",
    "section": "Generalizable function",
    "text": "Generalizable function\nNow that I have a worfklow for determining the suitable locations for oysters, I will create a generalizable function that can be applied to any species of interest. I will test this function for my second focal species blue mussels.\n\n# Define function name and arguments \nsuitability_fun &lt;- function(sst_min, sst_max, depth_min, depth_max, species) {\n  \n# 1. Reclassification matrices \n  \n  # Define SST reclassification matrix \n  sst_matrix &lt;- matrix(\n    c(\n      -Inf,  sst_min, 0,   # below min sst = 0/unsuitable\n       sst_min, sst_max, 1, # range of sst = 1/suitable\n       sst_max, Inf,    0   # above max sst = 0/unsuitable\n    ),\n    ncol = 3, byrow = TRUE\n  )\n\n  # Define Depth reclassification matrix \ndmin &lt;- min(depth_min, depth_max) # ensure depth min is the smaller depth\ndmax &lt;- max(depth_min, depth_max) \n\ndepth_matrix &lt;- matrix(\n  c(-Inf, -dmax, 0,\n    -dmax, -dmin, 1,\n    -dmin, Inf, 0),\n  ncol = 3, byrow = TRUE\n)\n  \n# 2. Reclassify SST and Depth data \n  \n  # Reclassify SST \n  sst_rcl &lt;- terra::classify(avg_sst_c, rcl = sst_matrix)\n  # Fill NAN values with NAs \n  values(sst_rcl)[is.nan(values(sst_rcl))] &lt;- NA\n\n  # Reclassify depth \n  depth_rcl &lt;- terra::classify(depth, rcl = depth_matrix)\n  \n# 3. Find suitable locations\n  # Multiply reclassifications to create matrix of 0/1\n  suitable_locations &lt;- sst_rcl * depth_rcl\n\n  # Convert zeros to NAs\n  suitable_locations[suitable_locations == 0] &lt;- NA\n\n  # Apply mask to keep only suitable raster cells in eez \n  eez_cells &lt;- mask(suitable_locations, eez)\n  \n  # Find cell area\n  eez_cells_area &lt;- cellSize(eez_cells, unit = \"km\")\n\n# 4. Zonal operation\n  \n  # Rasterize eez\nrast_eez &lt;- rasterize(eez, eez_cells, field = \"rgn_id\")\n\n  # perform zonal operation \narea_by_eez&lt;- zonal(x = eez_cells_area * eez_cells, z = rast_eez, fun = \"sum\", na.rm = TRUE)\n\n# 5. Join data \n\neez_suitable_locations &lt;- area_by_eez %&gt;%\n  left_join(eez, by = \"rgn_id\") %&gt;% # join on 'rgn_id'\n  rename(area_suitable_km = area) %&gt;% # rename column\n  select(rgn, area_suitable_km, geometry) # select certain columns for df\n\n# 6. Convert to sf object\neez_suitable_locations &lt;- st_as_sf(eez_suitable_locations)\n  \n\n# 7.  Create map \n  \nspecies_map &lt;-\ntm_basemap(\"Esri.WorldImagery\") +\ntm_shape(eez_suitable_locations) +\n  tm_polygons(fill = \"area_suitable_km\" , # fill polygons based on suitable area \n              style = \"cont\", # continuous value scale \n    palette = c(\"#9ef7f0\", \"#1d524d\"), # palette of colors \n    title = \"Suitable habitat (km²)\", size = 0.8) + # legend title \n  tm_layout(legend.outside = TRUE, \n            legend.text.size = 0.5) +\n  tm_title(paste(\"Suitable Habitat Range For\", \"\\n\", \"Blue Mussel Marine Aquaculture\"), size = 1) +\n  tm_graticules(lwd = 0.2) + # gridlines \n  tm_scalebar(position = c(\"left\", \"bottom\"), text.size = 0.3)+ #scalebar \n  tm_text(\"rgn\", # overlay text for region\n          size = 0.4,  \n          xmod = -0.2,\n  ymod = 0.3)\n\n\n# return species map and table of eez suitable area \nreturn(species_map) \n\n}"
  },
  {
    "objectID": "posts/marine-aquaculture-blog/marine-aquaculture.html#apply-function-blue-mussels",
    "href": "posts/marine-aquaculture-blog/marine-aquaculture.html#apply-function-blue-mussels",
    "title": "Assessing Potential Species for Marine Aquaculture in West Coast EEZs",
    "section": "Apply function: Blue Mussels",
    "text": "Apply function: Blue Mussels\nIn this section I will apply the suitability_fun function to my second focal species blue mussels.\n\nsuitability_fun(\n  sst_min = 5, # define min stt value\n  sst_max = 20, # define max sst value\n  depth_min = 0, # define min depth value\n  depth_max = 60, # define max depth value \n  species = \"Blue Mussel\" # define species name \n)\n\n\n\n\n── tmap v3 code detected ───────────────────────────────────────────────────────\n\n\n[v3-&gt;v4] `tm_polygons()`: instead of `style = \"cont\"`, use fill.scale =\n`tm_scale_continuous()`.\nℹ Migrate the argument(s) 'palette' (rename to 'values') to\n  'tm_scale_continuous(&lt;HERE&gt;)'\n[v3-&gt;v4] `tm_polygons()`: migrate the argument(s) related to the legend of the\nvisual variable `fill` namely 'title' to 'fill.legend = tm_legend(&lt;HERE&gt;)'\n[tm_polygons()] Argument `size` unknown.\n[plot mode] fit legend/component: Some legend items or map compoments do not\nfit well, and are therefore rescaled.\nℹ Set the tmap option `component.autoscale = FALSE` to disable rescaling.\n\n\n\n\n\n\n\n\n\nReflection: The map above depicts the suitable locations for blue mussel aquaculture within West Coast EEZs. As you can see, the regions with the most suitable habitat are Washington. The rest of the California and Oregon coast contain less suitable locations probably due to the temperature range for blue mussels, who prefer colder temperatures."
  },
  {
    "objectID": "posts/marine-aquaculture-blog/marine-aquaculture.html#final-thoughts",
    "href": "posts/marine-aquaculture-blog/marine-aquaculture.html#final-thoughts",
    "title": "Assessing Potential Species for Marine Aquaculture in West Coast EEZs",
    "section": "Final Thoughts",
    "text": "Final Thoughts\nThis project investigated the suitable habitats for two focal species –oyster and blue mussel– for marine aquaculture in West Coast Economic Exclusive Zones. Although I only mapped two species, the function suitability_fun can be used on a variety of species of interest for marine aquaculture. This analysis provides insight into the work needed to plan for marine aquaculture sites. Although I only include sea surface temperature and depth as specifications for suitability, as mentioned in Gentry et.al, there are many more factors that are of importance for assessing suitability of species. Additionally, as sea surface temperatures continue to rise due to climate change, the suitability for these species may alter."
  },
  {
    "objectID": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html",
    "href": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html",
    "title": "Investigating Blue Carbon with Beta Regression",
    "section": "",
    "text": "Coastal and marine ecosystems have the unique capacity to store carbon in the soil rather than vegetation like terrestrial ecosystems. This is often referred to as blue carbon, and is of growing interest as carbon dioxide continues to accumulate in the atmosphere. Understanding the biogeochemical processes that make up blue carbon is important for advancing blue carbon management as a solution to climate change (Survey (2024)).\nFor this project, I will fit a Beta Regression model to answer the following question:\n\nHow does soil organic matter affect carbon?\nDo some habitats (marsh, wetland, mangrove) have systematically more carbon than others?\n\n\n\n\nThis data is from the Smithsonian Environmental Research Center Coastal Carbon Network ((ERC_CoastalCarbon?)). The CCN collects and standardizes carbon stock and flux data from coastal ecosystems worldwide. They prove open-access to data sets for researchers and students like me. The dataset itself was originally over 15,000,000 observations. It includes data on soil measuremets such as depth of soil cores, soil bulk density, organic matter, carbon, and data on habitat and associated vegetation.\n\n\n\nIn this section I filtered the data for only variables of interest (fraction_carbon, fraction_organic_matter, max_depth, habitat) as well as ensured that fraction_carbon only contained fractional data between 0 and 1. For this dataset, I also filtered to the three most researched habitats for blue carbon: mangrove, seagrass, and marsh.\n\n# Import 'CCN_sites', 'CCN_species', 'CCN_cores', 'CCN_depth_series'\n\nsites &lt;- read_csv(here(\"posts/2025-12-04-eds222-blog/CCN_data/CCN_sites.csv\"))\nspecies &lt;- read_csv(here(\"posts/2025-12-04-eds222-blog/CCN_data/CCN_species.csv\"))\ncores &lt;- read_csv(here(\"posts/2025-12-04-eds222-blog/CCN_data/CCN_cores.csv\"))\ndepth_series &lt;- read_csv(here(\"posts/2025-12-04-eds222-blog/CCN_data/CCN_depthseries.csv\"))\n\n\n# .....Further filter datasets.....\n\n# species data \nspecies &lt;- species %&gt;% \n  select('site_id', 'habitat') %&gt;% \n  filter(habitat %in% c(\"mangrove\", \"seagrass\", \"marsh\")) %&gt;% \n  drop_na()\n\n# cores data \ncores &lt;- cores %&gt;% \n  select('site_id', 'max_depth') %&gt;% \n  drop_na()\n\n# depth series data \ndepth_series &lt;- depth_series %&gt;% \n  select('site_id','fraction_organic_matter', 'fraction_carbon') %&gt;% \n  drop_na()\n\n#.....Join datasets.....\n\nblue_carbon &lt;- species %&gt;% \n  full_join(depth_series, by = c('site_id')) %&gt;% \n  full_join(cores, by =  c('site_id')) \n\n\n#.....Remove Negative values from Fraction Carbon.....\n\n# Ensure `fraction_carbon` ranges between 0 and 1 for analysis.\nrange(blue_carbon$fraction_carbon)\n\nsum(blue_carbon$fraction_carbon &lt; 0, na.rm = TRUE) # 467 negative values. \n\n# Replace negative numbers wiht NAs\nblue_carbon$fraction_carbon[blue_carbon$fraction_carbon &lt; 0] &lt;- NA\n\n# Check range to ensure negative values were \nrange(blue_carbon$fraction_carbon)\n\n# Remove Nas from entire dataset\nblue_carbon &lt;- na.omit(blue_carbon)\n\n# clear up environment\nrm(list = c(\"cores\", \"depth_series\", \"sites\", \"species\"))\n\n\n\n\nIn order to understand what analysis needs to be done, some preliminary data exploration is useful.\n\nfrac_car_plot &lt;- blue_carbon %&gt;% \n  ggplot(aes(fraction_carbon)) +\n  geom_histogram(fill = \"#345084FF\") +\n  labs(x = \"Fraction carbon\", \n       y = \"Frequency\", \n       title = \"Distribution of Fraction Carbon\") +\n  theme_classic()\n\nfrac_car_plot\n\n\n\n\n\n\n\n\nAs you can see from the graph above, fraction carbon is left skewed signifying that it does not follow a normal distribution.\n\nblue_carbon %&gt;% \n  ggplot(aes(x = fraction_organic_matter, y = fraction_carbon, color = habitat)) +\n  geom_point(alpha = 0.5) +\n  scale_color_paletteer_d(\"nationalparkcolors::Acadia\") +\n  theme_classic() +\n  labs(x = \"Soil Organic Matter (dimensionless)\", \n       y = \"Fraction carbon (dimensionless)\", \n       title = \"Relationship Between Soil Organic Matter and Fraction Carbon\")\n\n\n\n\n\n\n\n\n\n\n\nSince my response variable, fraction_carbon is a fraction between 0 and 1, and is not normally distributed around the mean, I will use Beta regression (Cribari–Neto and Zeileis (2010)). Beta regression models the mean of a proportion or fraction as a function of predictors.\n\n\nQuestion: How does soil organic matter affect carbon?\n\nH₀ (null hypothesis): Soil organic matter has no effect on fraction carbon in the soil.\nH₁ (alternative hypothesis): Higher soil organic matter is associated with higher fraction carbon.\n\nWhy include max_depth? Deeper soils might have more organic matter accumulation and fraction carbon can change with depth (e.g., shallower layers of soil may have higher carbon than deeper layers). This is measured in cm.\nI represented these casual relationships with a DAG (directed acyclic graph):\n\n\n\nDAG\n\n\n\n\n\n\\[\n\\begin{align}\n\\text{carbon} &\\sim \\text{Beta}(\\mu, \\phi) \\\\\nlogit(\\mu) &= \\beta_0 + \\beta_1 \\, \\text{organicmatter}_i + \\beta_2 \\, \\text{maxdepth}_i\n\\end{align}\n\\]\n\ncarbon is the fraction of carbon, constrained between 0 and 1.\n\\(\\mu_i\\) is the expected value of carbon.\n\\(\\phi\\) is the precision parameter of the beta distribution. This controls the variance.\ncoefficients: \\(\\beta_0\\) is the intercept; \\(\\beta_1\\) and \\(\\beta_2\\) are coefficients for the predictors fraction organic matter and max depth\n\n\n\n\n\nIn order to determine if a Beta regression model is fit for this data, I will simulate data and perform an analysis on the simulated data. This includes the following steps:\n\ndefine sample size\nchoose parameters for \\(\\beta\\)\ndefine range for predictors: This step is not necessary but helpful in simulating real fake data.\ndefine linear equation and logit function\ngenerate response\nfit model to simulated data\n\n\n# set seed for reproducibility\nset.seed(123)\n\n# 1. Define sample size\nn &lt;- 1000 # large enough\n\n# 2. Choose parameters \nbeta_0 &lt;- 0.5 # intercept (fraction carbon)\nbeta_1 &lt;- 0.8  # effect of fraction organic matter\nbeta_2 &lt;- -0.01 # effect of max_depth\nphi &lt;- 0.8 # precision parameter \n\n# 3. define predictor ranges (x's)\n# (n=sample size, min, max)\nfraction_organic_matter &lt;- runif(n, 0.05, 0.2)\nmax_depth &lt;- runif(n, 0, 30)\n\n# 3. Linear predictor and Logit response\n  # set logit_mu \nlogit_mu &lt;- beta_0 + beta_1 * fraction_organic_matter + beta_2 * max_depth \n  # set transformation \n\n  # Inverse logit \nmu &lt;- 1 / (1 + exp(-logit_mu)) # mu = mean of beta distribution\n\n# 4. Generate response with rbeta(). Look up documentation\nshape1 &lt;- mu * phi\nshape2 &lt;- (1 - mu) * phi\nfraction_carbon &lt;- rbeta(n, shape1, shape2)\n\n# 5. Create dataframe for simulated data\nsim_blue_carbon &lt;- data.frame(fraction_carbon, fraction_organic_matter, max_depth)\n\n# 6. Fit model \nbetareg_sim_mdl &lt;- glmmTMB(fraction_carbon ~ fraction_organic_matter + max_depth, data = sim_blue_carbon, family = beta_family())\n\n  # Summarize model\nsummary(betareg_sim_mdl)\n\n\n\n\nTable 1. Model Assessment\n\n\nCoefficient\nSimulation Estimate\nActual Parameter\n\n\n\n\nIntercept\n0.4436133\n0.50\n\n\nFraction Organic Matter\n1.9178514\n0.80\n\n\nMax Depth(cm)\n-0.0115171\n-0.01\n\n\n\n\n\nThe model seems to recover parameters well. This is good evidence that beta regression is the model for this data.\n\n\n\nIn this section I will fit the model to real life data from the Smithsonian’s Coastal Carbon Network. I will use the glmmTMB package and specify the family as beta_family for a beta regression.\n\n# .....Fit beta regression model..... \n\nbetareg_mdl &lt;- glmmTMB(fraction_carbon ~ fraction_organic_matter + max_depth, \n                      data = blue_carbon[1:10000, ], family = beta_family()) # subset data for faster processing \n\n\n# .....Summarize model.....\nbetareg_mdl_sum &lt;- summary(betareg_mdl)\n\n# .....Extract coefficients..... \n\n# beta_0 (intercept)\nbeta_0 &lt;- betareg_mdl_sum$coefficients$cond[\"(Intercept)\", \"Estimate\"] \n\n# beta_1 (slope of reference)\nbeta_1 &lt;- betareg_mdl_sum$coefficients$cond[\"fraction_organic_matter\", \"Estimate\"]\n\n# beta_2 (change in intercepts)\nbeta_2 &lt;- betareg_mdl_sum$coefficients$cond[\"max_depth\", \"Estimate\"]\n\n# Dispersion parameter\ndispersion &lt;- sigma(betareg_mdl)\n\n\n\n\nTable 2. Beta Regression Output\n\n\nCoefficient\nEstimate\n\n\n\n\nIntercept\n-5.4448087\n\n\nFraction Organic Matter\n8.6053830\n\n\nMax Depth(cm)\n0.0277703\n\n\n\n\n\n\n\n\nIn this section I will generate predictions to visualize what the relationship will be for new data.\n\n# .....Create prediction grid.....\npred_grid &lt;- expand_grid(fraction_organic_matter = seq(from = 0, to = 1, by = 0.001)) %&gt;% \n  mutate(max_depth = mean(blue_carbon$max_depth, na.rm = TRUE))\n\n# ......Generate predictions.....\nbetareg_grid &lt;- pred_grid %&gt;% \n  mutate(predictions = predict(object = betareg_mdl, # glm\n                     newdata = pred_grid, # expand grid data\n                     type = \"response\")) # response link \n\n# .....Plot predictions.....\npredict_plot &lt;- ggplot(betareg_grid, aes(fraction_organic_matter, y = predictions)) +\n  geom_line(col = \"#345084FF\" ) +\n  labs(x= \"Fraction Organic Matter (dimensionless)\", \n       y = \"Fraction Carbon (dimensionless)\", \n       title = \"Predicted Fraction Carbon\") +\n  theme_bw()\n\n# View plot\npredict_plot\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLink to Github repository"
  },
  {
    "objectID": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#research-question",
    "href": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#research-question",
    "title": "Investigating Blue Carbon with Beta Regression",
    "section": "",
    "text": "Coastal and marine ecosystems have the unique capacity to store carbon in the soil rather than vegetation like terrestrial ecosystems. This is often referred to as blue carbon, and is of growing interest as carbon dioxide continues to accumulate in the atmosphere. Understanding the biogeochemical processes that make up blue carbon is important for advancing blue carbon management as a solution to climate change (Survey (2024)).\nFor this project, I will fit a Beta Regression model to answer the following question:\n\nHow does soil organic matter affect carbon?\nDo some habitats (marsh, wetland, mangrove) have systematically more carbon than others?"
  },
  {
    "objectID": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#data-background",
    "href": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#data-background",
    "title": "Investigating Blue Carbon with Beta Regression",
    "section": "",
    "text": "This data is from the Smithsonian Environmental Research Center Coastal Carbon Network ((ERC_CoastalCarbon?)). The CCN collects and standardizes carbon stock and flux data from coastal ecosystems worldwide. They prove open-access to data sets for researchers and students like me. The dataset itself was originally over 15,000,000 observations. It includes data on soil measuremets such as depth of soil cores, soil bulk density, organic matter, carbon, and data on habitat and associated vegetation."
  },
  {
    "objectID": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#data-wrangling",
    "href": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#data-wrangling",
    "title": "Investigating Blue Carbon with Beta Regression",
    "section": "",
    "text": "In this section I filtered the data for only variables of interest (fraction_carbon, fraction_organic_matter, max_depth, habitat) as well as ensured that fraction_carbon only contained fractional data between 0 and 1. For this dataset, I also filtered to the three most researched habitats for blue carbon: mangrove, seagrass, and marsh.\n\n# Import 'CCN_sites', 'CCN_species', 'CCN_cores', 'CCN_depth_series'\n\nsites &lt;- read_csv(here(\"posts/2025-12-04-eds222-blog/CCN_data/CCN_sites.csv\"))\nspecies &lt;- read_csv(here(\"posts/2025-12-04-eds222-blog/CCN_data/CCN_species.csv\"))\ncores &lt;- read_csv(here(\"posts/2025-12-04-eds222-blog/CCN_data/CCN_cores.csv\"))\ndepth_series &lt;- read_csv(here(\"posts/2025-12-04-eds222-blog/CCN_data/CCN_depthseries.csv\"))\n\n\n# .....Further filter datasets.....\n\n# species data \nspecies &lt;- species %&gt;% \n  select('site_id', 'habitat') %&gt;% \n  filter(habitat %in% c(\"mangrove\", \"seagrass\", \"marsh\")) %&gt;% \n  drop_na()\n\n# cores data \ncores &lt;- cores %&gt;% \n  select('site_id', 'max_depth') %&gt;% \n  drop_na()\n\n# depth series data \ndepth_series &lt;- depth_series %&gt;% \n  select('site_id','fraction_organic_matter', 'fraction_carbon') %&gt;% \n  drop_na()\n\n#.....Join datasets.....\n\nblue_carbon &lt;- species %&gt;% \n  full_join(depth_series, by = c('site_id')) %&gt;% \n  full_join(cores, by =  c('site_id')) \n\n\n#.....Remove Negative values from Fraction Carbon.....\n\n# Ensure `fraction_carbon` ranges between 0 and 1 for analysis.\nrange(blue_carbon$fraction_carbon)\n\nsum(blue_carbon$fraction_carbon &lt; 0, na.rm = TRUE) # 467 negative values. \n\n# Replace negative numbers wiht NAs\nblue_carbon$fraction_carbon[blue_carbon$fraction_carbon &lt; 0] &lt;- NA\n\n# Check range to ensure negative values were \nrange(blue_carbon$fraction_carbon)\n\n# Remove Nas from entire dataset\nblue_carbon &lt;- na.omit(blue_carbon)\n\n# clear up environment\nrm(list = c(\"cores\", \"depth_series\", \"sites\", \"species\"))"
  },
  {
    "objectID": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#data-exploration",
    "href": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#data-exploration",
    "title": "Investigating Blue Carbon with Beta Regression",
    "section": "",
    "text": "In order to understand what analysis needs to be done, some preliminary data exploration is useful.\n\nfrac_car_plot &lt;- blue_carbon %&gt;% \n  ggplot(aes(fraction_carbon)) +\n  geom_histogram(fill = \"#345084FF\") +\n  labs(x = \"Fraction carbon\", \n       y = \"Frequency\", \n       title = \"Distribution of Fraction Carbon\") +\n  theme_classic()\n\nfrac_car_plot\n\n\n\n\n\n\n\n\nAs you can see from the graph above, fraction carbon is left skewed signifying that it does not follow a normal distribution.\n\nblue_carbon %&gt;% \n  ggplot(aes(x = fraction_organic_matter, y = fraction_carbon, color = habitat)) +\n  geom_point(alpha = 0.5) +\n  scale_color_paletteer_d(\"nationalparkcolors::Acadia\") +\n  theme_classic() +\n  labs(x = \"Soil Organic Matter (dimensionless)\", \n       y = \"Fraction carbon (dimensionless)\", \n       title = \"Relationship Between Soil Organic Matter and Fraction Carbon\")"
  },
  {
    "objectID": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#statistical-model-beta-regression",
    "href": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#statistical-model-beta-regression",
    "title": "Investigating Blue Carbon with Beta Regression",
    "section": "",
    "text": "Since my response variable, fraction_carbon is a fraction between 0 and 1, and is not normally distributed around the mean, I will use Beta regression (Cribari–Neto and Zeileis (2010)). Beta regression models the mean of a proportion or fraction as a function of predictors.\n\n\nQuestion: How does soil organic matter affect carbon?\n\nH₀ (null hypothesis): Soil organic matter has no effect on fraction carbon in the soil.\nH₁ (alternative hypothesis): Higher soil organic matter is associated with higher fraction carbon.\n\nWhy include max_depth? Deeper soils might have more organic matter accumulation and fraction carbon can change with depth (e.g., shallower layers of soil may have higher carbon than deeper layers). This is measured in cm.\nI represented these casual relationships with a DAG (directed acyclic graph):\n\n\n\nDAG\n\n\n\n\n\n\\[\n\\begin{align}\n\\text{carbon} &\\sim \\text{Beta}(\\mu, \\phi) \\\\\nlogit(\\mu) &= \\beta_0 + \\beta_1 \\, \\text{organicmatter}_i + \\beta_2 \\, \\text{maxdepth}_i\n\\end{align}\n\\]\n\ncarbon is the fraction of carbon, constrained between 0 and 1.\n\\(\\mu_i\\) is the expected value of carbon.\n\\(\\phi\\) is the precision parameter of the beta distribution. This controls the variance.\ncoefficients: \\(\\beta_0\\) is the intercept; \\(\\beta_1\\) and \\(\\beta_2\\) are coefficients for the predictors fraction organic matter and max depth"
  },
  {
    "objectID": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#fit-model-to-simulated-data",
    "href": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#fit-model-to-simulated-data",
    "title": "Investigating Blue Carbon with Beta Regression",
    "section": "",
    "text": "In order to determine if a Beta regression model is fit for this data, I will simulate data and perform an analysis on the simulated data. This includes the following steps:\n\ndefine sample size\nchoose parameters for \\(\\beta\\)\ndefine range for predictors: This step is not necessary but helpful in simulating real fake data.\ndefine linear equation and logit function\ngenerate response\nfit model to simulated data\n\n\n# set seed for reproducibility\nset.seed(123)\n\n# 1. Define sample size\nn &lt;- 1000 # large enough\n\n# 2. Choose parameters \nbeta_0 &lt;- 0.5 # intercept (fraction carbon)\nbeta_1 &lt;- 0.8  # effect of fraction organic matter\nbeta_2 &lt;- -0.01 # effect of max_depth\nphi &lt;- 0.8 # precision parameter \n\n# 3. define predictor ranges (x's)\n# (n=sample size, min, max)\nfraction_organic_matter &lt;- runif(n, 0.05, 0.2)\nmax_depth &lt;- runif(n, 0, 30)\n\n# 3. Linear predictor and Logit response\n  # set logit_mu \nlogit_mu &lt;- beta_0 + beta_1 * fraction_organic_matter + beta_2 * max_depth \n  # set transformation \n\n  # Inverse logit \nmu &lt;- 1 / (1 + exp(-logit_mu)) # mu = mean of beta distribution\n\n# 4. Generate response with rbeta(). Look up documentation\nshape1 &lt;- mu * phi\nshape2 &lt;- (1 - mu) * phi\nfraction_carbon &lt;- rbeta(n, shape1, shape2)\n\n# 5. Create dataframe for simulated data\nsim_blue_carbon &lt;- data.frame(fraction_carbon, fraction_organic_matter, max_depth)\n\n# 6. Fit model \nbetareg_sim_mdl &lt;- glmmTMB(fraction_carbon ~ fraction_organic_matter + max_depth, data = sim_blue_carbon, family = beta_family())\n\n  # Summarize model\nsummary(betareg_sim_mdl)\n\n\n\n\nTable 1. Model Assessment\n\n\nCoefficient\nSimulation Estimate\nActual Parameter\n\n\n\n\nIntercept\n0.4436133\n0.50\n\n\nFraction Organic Matter\n1.9178514\n0.80\n\n\nMax Depth(cm)\n-0.0115171\n-0.01\n\n\n\n\n\nThe model seems to recover parameters well. This is good evidence that beta regression is the model for this data."
  },
  {
    "objectID": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#fit-model-to-real-life-data",
    "href": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#fit-model-to-real-life-data",
    "title": "Investigating Blue Carbon with Beta Regression",
    "section": "",
    "text": "In this section I will fit the model to real life data from the Smithsonian’s Coastal Carbon Network. I will use the glmmTMB package and specify the family as beta_family for a beta regression.\n\n# .....Fit beta regression model..... \n\nbetareg_mdl &lt;- glmmTMB(fraction_carbon ~ fraction_organic_matter + max_depth, \n                      data = blue_carbon[1:10000, ], family = beta_family()) # subset data for faster processing \n\n\n# .....Summarize model.....\nbetareg_mdl_sum &lt;- summary(betareg_mdl)\n\n# .....Extract coefficients..... \n\n# beta_0 (intercept)\nbeta_0 &lt;- betareg_mdl_sum$coefficients$cond[\"(Intercept)\", \"Estimate\"] \n\n# beta_1 (slope of reference)\nbeta_1 &lt;- betareg_mdl_sum$coefficients$cond[\"fraction_organic_matter\", \"Estimate\"]\n\n# beta_2 (change in intercepts)\nbeta_2 &lt;- betareg_mdl_sum$coefficients$cond[\"max_depth\", \"Estimate\"]\n\n# Dispersion parameter\ndispersion &lt;- sigma(betareg_mdl)\n\n\n\n\nTable 2. Beta Regression Output\n\n\nCoefficient\nEstimate\n\n\n\n\nIntercept\n-5.4448087\n\n\nFraction Organic Matter\n8.6053830\n\n\nMax Depth(cm)\n0.0277703"
  },
  {
    "objectID": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#generate-predictions",
    "href": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#generate-predictions",
    "title": "Investigating Blue Carbon with Beta Regression",
    "section": "",
    "text": "In this section I will generate predictions to visualize what the relationship will be for new data.\n\n# .....Create prediction grid.....\npred_grid &lt;- expand_grid(fraction_organic_matter = seq(from = 0, to = 1, by = 0.001)) %&gt;% \n  mutate(max_depth = mean(blue_carbon$max_depth, na.rm = TRUE))\n\n# ......Generate predictions.....\nbetareg_grid &lt;- pred_grid %&gt;% \n  mutate(predictions = predict(object = betareg_mdl, # glm\n                     newdata = pred_grid, # expand grid data\n                     type = \"response\")) # response link \n\n# .....Plot predictions.....\npredict_plot &lt;- ggplot(betareg_grid, aes(fraction_organic_matter, y = predictions)) +\n  geom_line(col = \"#345084FF\" ) +\n  labs(x= \"Fraction Organic Matter (dimensionless)\", \n       y = \"Fraction Carbon (dimensionless)\", \n       title = \"Predicted Fraction Carbon\") +\n  theme_bw()\n\n# View plot\npredict_plot"
  },
  {
    "objectID": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#github",
    "href": "posts/2025-12-04-eds222-blog/blue-carbon-beta-regression.html#github",
    "title": "Investigating Blue Carbon with Beta Regression",
    "section": "",
    "text": "Link to Github repository"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Isabella Segarra",
    "section": "",
    "text": "I am Isabella Segarra, a beginner environmental data scientist and student at UCSB’s Bren Masters of Environmental Data Science. Before Bren, I studied Environmental Science at UC Merced, in the heart of the Central Valley. There, I developed a love for ecology; joining research projects studying fungal ecology, phenology, and even conducting my own research on grassland non-native species. For most of my undergrad experience, my research interests were all over the place and so I decided to study the data for the ecosystems and environmental processes I love. In my free time, I enjoy training for marathons (2x full; 2x half marathons), reading, and thrifting!"
  },
  {
    "objectID": "index.html#hi-there",
    "href": "index.html#hi-there",
    "title": "Isabella Segarra",
    "section": "",
    "text": "I am Isabella Segarra, a beginner environmental data scientist and student at UCSB’s Bren Masters of Environmental Data Science. Before Bren, I studied Environmental Science at UC Merced, in the heart of the Central Valley. There, I developed a love for ecology; joining research projects studying fungal ecology, phenology, and even conducting my own research on grassland non-native species. For most of my undergrad experience, my research interests were all over the place and so I decided to study the data for the ecosystems and environmental processes I love. In my free time, I enjoy training for marathons (2x full; 2x half marathons), reading, and thrifting!"
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "Blog",
    "section": "",
    "text": "Assessing Potential Species for Marine Aquaculture in West Coast EEZs\n\n\n\nMEDS\n\nR\n\ndata-viz\n\n\n\nReproducible functions for assessing species for marine aquaculture.\n\n\n\nIsabella Segarra\n\n\nDec 6, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nInvestigating Blue Carbon with Beta Regression\n\n\n\nMEDS\n\nR\n\ndata-viz\n\n\n\nA brief statistical analysis of soil carbon.\n\n\n\nIsabella Segarra\n\n\nDec 4, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nVisualizing the Palisades and Eaton Fires: False Color, True Color, and Community Impacts\n\n\n\nPython\n\nMEDS\n\ndata-viz\n\nGeospatial\n\n\n\nUtilizing satellite imagery to map fire impacts.\n\n\n\nIsabella Segarra\n\n\nDec 3, 2025\n\n\n\n\n\n\nNo matching items"
  }
]